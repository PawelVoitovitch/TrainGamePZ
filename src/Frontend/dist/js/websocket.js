"use strict";var stompClient,destinationCardsQuantity=document.querySelector(".destinationCardsQuantityAll"),trainCardsQuantity=document.querySelector(".trainCardsQuantityAll"),token=sessionStorage.getItem("token"),headers={};function connectToSocket(t){var e=new SockJS(url+"/join",void 0,{crossDomain:!0,headers:headers});(stompClient=Stomp.over(e)).connect({},function(e){console.log("connected to the frame: "+e),stompClient.subscribe("/topic/lobby/"+t,function(e){console.log("received message: "+e),location.reload()},function(e){console.log("Error: "+e)})})}function connectToGameSocket(t){console.log("connecting to the game");var e=new SockJS(url+"/join",void 0,{crossDomain:!0,headers:headers});(stompClient=Stomp.over(e)).connect({},function(e){stompClient.subscribe("/topic/game-progress/"+t,function(e){e=JSON.parse(e.body);updateBoard(e.visibleTrains),destinationCardsQuantity.textContent="x".concat(e.ticketDeck.length),trainCardsQuantity.textContent="x".concat(e.trainDeck.length),availableColors=e.trainDeck,tickets=e.ticketDeck,currentBoard=e.board,turnArr=e.playersOrder,turn(),drawDestinationCards(tickets),loadGame(),setTrainsOnBoard(e.board),"ENDED"===e.status&&handleGameEnd(e)},function(e){console.log("Error: "+e)})})}function handleGameEnd(e){var s=document.querySelector(".resultPopup");s.style.display="flex",s.style.zIndex=100,e.players.sort(function(e,t){return t.points-e.points}).forEach(function(e,t){var n=document.createElement("div"),o=(n.classList.add("divPlayerResult"),document.createElement("span")),r=(o.classList.add("mdi","mdi-trophy"),document.createElement("p")),a=(r.classList.add("playerNameResult"),r.textContent=e.login,document.createElement("p"));a.classList.add("playerResult"),a.textContent=e.points,n.appendChild(o),n.appendChild(r),n.appendChild(a),0===t?n.style.backgroundColor="gold":1===t?n.style.backgroundColor="silver":2===t?n.style.backgroundColor="brown":3===t&&(n.style.backgroundColor="green"),s.appendChild(n)})}token&&(headers.Authorization="Bearer "+token);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnNvY2tldC5qcyJdLCJuYW1lcyI6WyJzdG9tcENsaWVudCIsImRlc3RpbmF0aW9uQ2FyZHNRdWFudGl0eSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRyYWluQ2FyZHNRdWFudGl0eSIsInRva2VuIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwiaGVhZGVycyIsImNvbm5lY3RUb1NvY2tldCIsImdhbWVJZCIsInNvY2tldCIsIlNvY2tKUyIsInVybCIsInVuZGVmaW5lZCIsImNyb3NzRG9tYWluIiwiU3RvbXAiLCJvdmVyIiwiY29ubmVjdCIsImZyYW1lIiwiY29uc29sZSIsImxvZyIsImxvY2F0aW9uIiwicmVzcG9uc2UiLCJyZWxvYWQiLCJlcnJvciIsImNvbm5lY3RUb0dhbWVTb2NrZXQiLCJkYXRhIiwidGV4dENvbnRlbnQiLCJhdmFpbGFibGVDb2xvcnMiLCJ0aWNrZXREZWNrIiwiY3VycmVudEJvYXJkIiwidHVybkFyciIsInBsYXllcnNPcmRlciIsImJvZHkiLCJ1cGRhdGVCb2FyZCIsInZpc2libGVUcmFpbnMiLCJ0aWNrZXRzIiwiY29uY2F0IiwibGVuZ3RoIiwidHJhaW5EZWNrIiwic3RhdHVzIiwiaGFuZGxlR2FtZUVuZCIsInR1cm4iLCJkcmF3RGVzdGluYXRpb25DYXJkcyIsImxvYWRHYW1lIiwic2V0VHJhaW5zT25Cb2FyZCIsImJvYXJkIiwic2VydmVyUmVzcG9uc2UiLCJyZXN1bHRQb3B1cCIsInNvcnRlZFBsYXllcnMiLCJ0cm9waHlJY29uIiwiY2xhc3NMaXN0IiwicGxheWVyTmFtZSIsImRpc3BsYXkiLCJsb2dpbiIsInNvcnQiLCJhIiwiYiIsInBsYXllclJlc3VsdCIsImRpdlBsYXllclJlc3VsdCIsImFwcGVuZENoaWxkIiwiYmFja2dyb3VuZENvbG9yIiwiYWRkIiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwicGxheWVyIiwicG9pbnRzIiwiaW5kZXgiXSwibWFwcGluZ3MiOiJhQUFBLElBQUlBLFlBQ0VD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Z0JLLE1BQU1ILGdCQUFrQixRQUNwQixJQUFWTSxJQUNWUixFQUFnQkssTUFBTUgsZ0JBQWtCLFNBR3pDYixFQUFZWSxZQUFZRCxDQUFlLENBQ3hDLENBQUMsQ0FDRixDQWpHSXZELFFBQ0hHLFFBQVEsY0FBZ0IsVUFBWUgiLCJmaWxlIjoid2Vic29ja2V0LmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHN0b21wQ2xpZW50O1xyXG5jb25zdCBkZXN0aW5hdGlvbkNhcmRzUXVhbnRpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG5cdFwiLmRlc3RpbmF0aW9uQ2FyZHNRdWFudGl0eUFsbFwiXHJcbik7XHJcbmNvbnN0IHRyYWluQ2FyZHNRdWFudGl0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHJhaW5DYXJkc1F1YW50aXR5QWxsXCIpO1xyXG5jb25zdCB0b2tlbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJ0b2tlblwiKTtcclxubGV0IGhlYWRlcnMgPSB7fTtcclxuaWYgKHRva2VuKSB7XHJcblx0aGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSBcIkJlYXJlciBcIiArIHRva2VuO1xyXG59XHJcbmZ1bmN0aW9uIGNvbm5lY3RUb1NvY2tldChnYW1lSWQpIHtcclxuXHRsZXQgc29ja2V0ID0gbmV3IFNvY2tKUyh1cmwgKyBcIi9qb2luXCIsIHVuZGVmaW5lZCwge1xyXG5cdFx0Y3Jvc3NEb21haW46IHRydWUsXHJcblx0XHRoZWFkZXJzOiBoZWFkZXJzLFxyXG5cdH0pO1xyXG5cdHN0b21wQ2xpZW50ID0gU3RvbXAub3Zlcihzb2NrZXQpO1xyXG5cdHN0b21wQ2xpZW50LmNvbm5lY3Qoe30sIGZ1bmN0aW9uIChmcmFtZSkge1xyXG5cdFx0Y29uc29sZS5sb2coXCJjb25uZWN0ZWQgdG8gdGhlIGZyYW1lOiBcIiArIGZyYW1lKTtcclxuXHRcdHN0b21wQ2xpZW50LnN1YnNjcmliZShcclxuXHRcdFx0XCIvdG9waWMvbG9iYnkvXCIgKyBnYW1lSWQsXHJcblx0XHRcdGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwicmVjZWl2ZWQgbWVzc2FnZTogXCIgKyByZXNwb25zZSk7XHJcblx0XHRcdFx0bG9jYXRpb24ucmVsb2FkKCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGZ1bmN0aW9uIChlcnJvcikge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiRXJyb3I6IFwiICsgZXJyb3IpO1xyXG5cdFx0XHR9XHJcblx0XHQpO1xyXG5cdH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjb25uZWN0VG9HYW1lU29ja2V0KGdhbWVJZCkge1xyXG5cdGNvbnNvbGUubG9nKFwiY29ubmVjdGluZyB0byB0aGUgZ2FtZVwiKTtcclxuXHRsZXQgc29ja2V0ID0gbmV3IFNvY2tKUyh1cmwgKyBcIi9qb2luXCIsIHVuZGVmaW5lZCwge1xyXG5cdFx0Y3Jvc3NEb21haW46IHRydWUsXHJcblx0XHRoZWFkZXJzOiBoZWFkZXJzLFxyXG5cdH0pO1xyXG5cdHN0b21wQ2xpZW50ID0gU3RvbXAub3Zlcihzb2NrZXQpO1xyXG5cdHN0b21wQ2xpZW50LmNvbm5lY3Qoe30sIGZ1bmN0aW9uIChmcmFtZSkge1xyXG5cdFx0c3RvbXBDbGllbnQuc3Vic2NyaWJlKFxyXG5cdFx0XHRcIi90b3BpYy9nYW1lLXByb2dyZXNzL1wiICsgZ2FtZUlkLFxyXG5cdFx0XHRmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRjb25zdCBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS5ib2R5KTtcclxuXHRcdFx0XHR1cGRhdGVCb2FyZChkYXRhLnZpc2libGVUcmFpbnMpO1xyXG5cdFx0XHRcdGRlc3RpbmF0aW9uQ2FyZHNRdWFudGl0eS50ZXh0Q29udGVudCA9IGB4JHtkYXRhLnRpY2tldERlY2subGVuZ3RofWA7XHJcblx0XHRcdFx0dHJhaW5DYXJkc1F1YW50aXR5LnRleHRDb250ZW50ID0gYHgke2RhdGEudHJhaW5EZWNrLmxlbmd0aH1gO1xyXG5cdFx0XHRcdGF2YWlsYWJsZUNvbG9ycyA9IGRhdGEudHJhaW5EZWNrO1xyXG5cdFx0XHRcdHRpY2tldHMgPSBkYXRhLnRpY2tldERlY2s7XHJcblx0XHRcdFx0Y3VycmVudEJvYXJkID0gZGF0YS5ib2FyZDtcclxuXHRcdFx0XHR0dXJuQXJyID0gZGF0YS5wbGF5ZXJzT3JkZXI7XHJcblx0XHRcdFx0dHVybigpO1xyXG5cdFx0XHRcdGRyYXdEZXN0aW5hdGlvbkNhcmRzKHRpY2tldHMpO1xyXG5cdFx0XHRcdGxvYWRHYW1lKCk7XHJcblx0XHRcdFx0c2V0VHJhaW5zT25Cb2FyZChkYXRhLmJvYXJkKTtcclxuXHRcdFx0XHRpZiAoZGF0YS5zdGF0dXMgPT09IFwiRU5ERURcIikge1xyXG5cdFx0XHRcdFx0aGFuZGxlR2FtZUVuZChkYXRhKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdGZ1bmN0aW9uIChlcnJvcikge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiRXJyb3I6IFwiICsgZXJyb3IpO1xyXG5cdFx0XHR9XHJcblx0XHQpO1xyXG5cdH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVHYW1lRW5kKHNlcnZlclJlc3BvbnNlKSB7XHJcblx0Y29uc3QgcmVzdWx0UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdFBvcHVwXCIpO1xyXG5cdHJlc3VsdFBvcHVwLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuXHRyZXN1bHRQb3B1cC5zdHlsZS56SW5kZXggPSAxMDA7XHJcblx0Y29uc3Qgc29ydGVkUGxheWVycyA9IHNlcnZlclJlc3BvbnNlLnBsYXllcnMuc29ydChcclxuXHRcdChhLCBiKSA9PiBiLnBvaW50cyAtIGEucG9pbnRzXHJcblx0KTtcclxuXHJcblx0c29ydGVkUGxheWVycy5mb3JFYWNoKChwbGF5ZXIsIGluZGV4KSA9PiB7XHJcblx0XHRjb25zdCBkaXZQbGF5ZXJSZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0ZGl2UGxheWVyUmVzdWx0LmNsYXNzTGlzdC5hZGQoXCJkaXZQbGF5ZXJSZXN1bHRcIik7XHJcblxyXG5cdFx0Y29uc3QgdHJvcGh5SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG5cdFx0dHJvcGh5SWNvbi5jbGFzc0xpc3QuYWRkKFwibWRpXCIsIFwibWRpLXRyb3BoeVwiKTtcclxuXHJcblx0XHRjb25zdCBwbGF5ZXJOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcblx0XHRwbGF5ZXJOYW1lLmNsYXNzTGlzdC5hZGQoXCJwbGF5ZXJOYW1lUmVzdWx0XCIpO1xyXG5cdFx0cGxheWVyTmFtZS50ZXh0Q29udGVudCA9IHBsYXllci5sb2dpbjtcclxuXHJcblx0XHRjb25zdCBwbGF5ZXJSZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuXHRcdHBsYXllclJlc3VsdC5jbGFzc0xpc3QuYWRkKFwicGxheWVyUmVzdWx0XCIpO1xyXG5cdFx0cGxheWVyUmVzdWx0LnRleHRDb250ZW50ID0gcGxheWVyLnBvaW50cztcclxuXHJcblx0XHRkaXZQbGF5ZXJSZXN1bHQuYXBwZW5kQ2hpbGQodHJvcGh5SWNvbik7XHJcblx0XHRkaXZQbGF5ZXJSZXN1bHQuYXBwZW5kQ2hpbGQocGxheWVyTmFtZSk7XHJcblx0XHRkaXZQbGF5ZXJSZXN1bHQuYXBwZW5kQ2hpbGQocGxheWVyUmVzdWx0KTtcclxuXHJcblx0XHRpZiAoaW5kZXggPT09IDApIHtcclxuXHRcdFx0ZGl2UGxheWVyUmVzdWx0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiZ29sZFwiO1xyXG5cdFx0fSBlbHNlIGlmIChpbmRleCA9PT0gMSkge1xyXG5cdFx0XHRkaXZQbGF5ZXJSZXN1bHQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJzaWx2ZXJcIjtcclxuXHRcdH0gZWxzZSBpZiAoaW5kZXggPT09IDIpIHtcclxuXHRcdFx0ZGl2UGxheWVyUmVzdWx0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiYnJvd25cIjtcclxuXHRcdH0gZWxzZSBpZiAoaW5kZXggPT09IDMpIHtcclxuXHRcdFx0ZGl2UGxheWVyUmVzdWx0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiZ3JlZW5cIjtcclxuXHRcdH1cclxuXHJcblx0XHRyZXN1bHRQb3B1cC5hcHBlbmRDaGlsZChkaXZQbGF5ZXJSZXN1bHQpO1xyXG5cdH0pO1xyXG59XHJcbiJdfQ==
